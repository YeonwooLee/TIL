#### 클래스 설명

#### ReadPython.java

> #파라미터
>
> - responseType : 반환 타입(커스텀 클래스) - 파이썬 출력값을 담을 클래스
> - pythonProgramName: 파이썬 프로그램명
> - args: arguments -- 파이썬 프로그램에서 파싱하여 사용함
>
> #코드
>
> - String path는 수정하여 사용
>
>   > //Group = com.mysite  
>   >
>   > //Artifact = sbb        
>   >
>   > //내부 패키지 = python
>
>   - String path = workingDir + "\\src\\main\\java\\com\\mysite\\sbb\\python";

```java
package com.mysite.sbb.python;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import com.google.gson.Gson;


public class ReadPython {
    public static <T> T readPythonFile(Class<T> responseType,String pythonProgramName, String[] args) {
        //Group = com.mysite
        //Artifact = sbb
        //내부 패키지 = python
        String workingDir = System.getProperty("user.dir");
        System.out.println("workingDir = " + workingDir);
        String path = workingDir + "\\src\\main\\java\\com\\mysite\\sbb\\python";
        String command = String.format("python %s\\%s.py", path, pythonProgramName);
        for (String arg : args) {
            command += " " + arg;
        }
        String result = "";
        T mo = null;
        try {
            Process p = Runtime.getRuntime().exec(command);
            BufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream()));
            String output = in.readLine(); //파이썬 dict 형식으로 출력(print)

            mo = new Gson().fromJson(output, responseType);//파이썬 dict형식 출력을 MyObject형식으로 변경
        } catch (Exception e) {
            e.printStackTrace();
        }
        if(mo==null) throw new RuntimeException("python 반환값 null");
        return mo;
    }
}

```





#### 실행할 파이썬 파일 예시

#### script.py

```python
def main(args):
    # Do some processing with the arguments

    # Return the result
    result = {}
    result['gameId'] = args 

    result['top']=str(type(args)) #<class 'list'>
    result['jungle']="jg"
    result['mid']="md"
    result['adc']="adc"
    result['support']="sp1"
    return result

if __name__ == "__main__":
    import sys
    result = main(sys.argv[1:])
    print(result) # 출력을 해야 들어감

```



#### responseType(커스텀 클래스) 예시

```java
package com.mysite.sbb.python;

import lombok.Getter;
import lombok.Setter;
import lombok.ToString;

@Getter
@Setter
@ToString
public class MyObject {
    @SerializedName("gameId")//파이썬에서 이름 다른 경우 Serializedname 사용
    private String[] gameId;
    private String top;
    private String jungle;
    private String mid;
    private String adc;
    private String support;

}

```



---



#### 활용예시

```java
class ReadPythonTest {
    @Test
    void 파이썬_테스트(){
        MyObject read = ReadPython.readPythonFile(MyObject.class,"script", new String[]{"aa", "ab"});
        System.out.println("read = " + read.toString());
        assertArrayEquals(read.getGameId(),new String[]{"aa","ab"});
    }

}
```



#### 출력예시

```
workingDir = C:\my2023programs\learn\jump_to_springboot\sbb
read = MyObject(gameId=[aa, ab], top=<class 'list'>, jungle=jg, mid=md, adc=adc, support=sp1)
```
